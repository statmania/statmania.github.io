<!DOCTYPE html>
<meta charset="utf-8">
<style>
  .district {
    stroke: #fff;
    stroke-width: 0.5;
  }
</style>
<body>
  <svg id="map" width="800" height="600"></svg>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    const width = 800, height = 600;

    const svg = d3.select("#map")
                  .attr("width", width)
                  .attr("height", height);

    const projection = d3.geoMercator()
      .center([90.3563, 23.6849]) // Center of Bangladesh
      .scale(5000)                // Adjust zoom
      .translate([width / 2, height / 2]);

    const path = d3.geoPath().projection(projection);

    Promise.all([
      d3.json("gadm41_BGD_2.json"),   // Your GeoJSON
      d3.csv("district_values.csv")   // Your CSV with NAME_2, Value
    ]).then(([geoData, csvData]) => {

      // Create a lookup from CSV
      const valueByDistrict = {};
      csvData.forEach(d => {
        valueByDistrict[d.NAME_2] = +d.Value;
      });

      // Define color scale
      const colorScale = d3.scaleSequential()
                           .domain(d3.extent(csvData, d => +d.Value))
                           .interpolator(d3.interpolateYlOrRd);

      // Draw the districts
      svg.selectAll("path")
        .data(geoData.features)
        .join("path")
        .attr("class", "district")
        .attr("d", path)
        .attr("fill", d => {
          const value = valueByDistrict[d.properties.NAME_2];
          return value ? colorScale(value) : "#ccc";
        })
        .append("title") // Tooltip
        .text(d => `${d.properties.NAME_2}: ${valueByDistrict[d.properties.NAME_2] || "N/A"}`);
    });
  </script>
</body>
